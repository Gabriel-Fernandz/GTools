source $GTOOLS_PATH/Boards/common/stm32

SDK=$SDK_MP1

source $SDK

unset CFLAGS CPPFLAGS CXXFLAGS LDFLAGS MACHINE LD_LIBRARY_PATH

PLATFORM="stm32mp1"

# TFA
TFA_CC_ARCH="ARCH=aarch32"

AARCH32_SP=optee
ARM_ARCH_MAJOR=7

PLAT=${PLATFORM}
DTB_FILE_NAME=${CC_BOARD_NAME}.dtb
OPENSSL_DIR='${OECORE_NATIVE_SYSROOT}/usr'
STM32MP_SDMMC=1
DEBUG=1
unset TFA_EXTERNAL_DT

# OPTEE
export CROSS_COMPILE64=$CROSS_COMPILE
OPTEE_CC_ARCH="ARCH=arm"

PLATFORM=${PLATFORM}
CFLAGS="-std=gnu99"
# LIBGCC_LOCATE_CFLAGS="--sysroot=${SDKTARGETSYSROOT}"
unset LIBGCC_LOCATE_CFLAGS
CFLAGS32='--sysroot=${SDKTARGETSYSROOT}'
CFG_EMBED_DTB_SOURCE_FILE=${CC_BOARD_NAME}.dts
CFG_TEE_CORE_DEBUG=y
CFG_TEE_CORE_LOG_LEVEL=2
CFG_SCMI_SCPFW=n

# UBOOT
UBOOT_DEFCONFIG="stm32mp13_defconfig"
UBOOT_DEVICE_TREE="DEVICE_TREE=${CC_BOARD_NAME} "

# KERNEL
KERNEL_IMAGE_FILE="arch/arm/boot/uImage"
KERNEL_DTB_FILES="arch/arm/boot/dts/stm32mp1*.dtb"
KERNEL_BUILD_DIR=../build/stm32mp1/kernel
INSTALL_MOD_PATH="modules"

LOADADDR=0xC0208000
W=1

KERNEL_USER_MAKE_OPTIONS="uImage "
KERKERNEL_USER_MAKE_OPTIONSNEL_OPTIONS+="vmlinux "
KERNEL_USER_MAKE_OPTIONS+="dtbs "


KERNEL_DEFCONFIG="fragment-01-multiv7_cleanup.config "
KERNEL_DEFCONFIG+="fragment-02-multiv7_addons.config "
KERNEL_DEFCONFIG+="fragment-03-multiv7_cleanup_valid.config "
KERNEL_DEFCONFIG+="fragment-04-multiv7_addons_valid.config "